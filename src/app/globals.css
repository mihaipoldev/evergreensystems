
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Brand color variables - base hue, saturation, lightness */
    --brand-h: 212;
    --brand-s: 96;
    --brand-l: 51;

    --background: 0 0% 100%;
    --foreground: 0 0% 3.9%;

    --card: 0 0% 100%;
    --card-foreground: 0 0% 3.9%;

    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 3.9%;

    --muted: 0 0% 96.1%;
    --muted-foreground: 0 0% 45.1%;

    --accent: 0 0% 96.1%;
    --accent-foreground: 0 0% 9%;

    --border: 0 0% 89.8%;
    --input: 0 0% 89.8%;
    --input-background: 0 0% 100%;
    --ring: 0 0% 3.9%;
    --radius: 0.75rem;

    --primary: var(--brand-h) var(--brand-s)% var(--brand-l)%;
    --primary-foreground: 0 0% 98%;

    --secondary: 0 0% 96.1%;
    --secondary-foreground: 0 0% 9%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;

    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;

    /* Custom tokens for funnel pages */
    --text-primary: 220 20% 15%;
    --text-secondary: 220 10% 40%;
    --text-muted: 220 8% 55%;
    
    --surface-elevated: 220 15% 99%;
    --surface-subtle: 220 12% 97%;
    
    --cta-bg: var(--primary);
    --cta-hover: 220 25% 12%;
    --cta-text: 0 0% 100%;
    
    --success: 160 60% 40%;
    --success-muted: 160 40% 95%;

    /* Font family variables - admin only (using geist-sans directly) */
    --font-family-admin-heading: var(--font-geist-sans);
    --font-family-admin-body: var(--font-geist-sans);
    
    /* Font family variables - public/landing page */
    /* Configure these in globals.css to change landing page fonts */
    --font-family-public-heading: var(--font-gotham);
    --font-family-public-body: var(--font-gotham);
    
    /* Gotham font (custom, not from Google Fonts) */
    /* Note: Font files need to be provided and loaded separately */
    --font-gotham: "Gotham", "Gotham SSm A", "Gotham SSm B", system-ui, sans-serif;

    /* Table variables - fallback values (overridden in admin preset) */
    --table-background: transparent;
    --table-head-background: transparent;
    --table-head-foreground: var(--muted-foreground);
    --table-accent-background: transparent;
  }

  .dark {
    --brand-h: 0;
    --brand-s: 0;
    --brand-l: 98;

    --background: 0 0% 10%;
    --foreground: 0 0% 95%;

    --card: 0 0% 13%;
    --card-foreground: 0 0% 95%;

    --popover: 0 0% 10%;
    --popover-foreground: 0 0% 95%;

    --muted: 0 0% 18%;
    --muted-foreground: 0 0% 63.9%;

    --accent: 0 0% 14.9%;
    --accent-foreground: 0 0% 95%;

    --border: 0 0% 16%;
    --input: 0 0% 22%;
    --input-background: 0 0% 10%;
    --ring: 0 0% 60.1%;

    /* Font family variables - public/landing page (same as light mode) */
    --font-family-public-heading: var(--font-lato);
    --font-family-public-body: var(--font-lato);

    --primary: var(--brand-h) var(--brand-s)% var(--brand-l)%;
    --primary-foreground: 0 0% 98%;

    --secondary: 0 0% 14.9%;
    --secondary-foreground: 0 0% 98%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;

    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;

    /* Table variables - fallback values (overridden in admin preset) */
    --table-background: transparent;
    --table-head-background: transparent;
    --table-head-foreground: var(--muted-foreground);
    --table-accent-background: transparent;
  }

  /* Admin Preset - Professional, darker tones */
  .preset-admin {
    /* Brand color variables - base hue, saturation, lightness */
    --brand-h: 0;
    --brand-s: 0;
    --brand-l: 9;

    --background: 0 0% 95%;
    --foreground: 0 0% 4%;

    --card: 0 0% 100%;
    --card-foreground: 0 0% 3.9%;

    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 3.9%;

    --muted: 0 0% 88%;
    --muted-foreground: 0 0% 45.1%;

    --accent: 0 0% 40%;
    --accent-foreground: 0 0% 100%;

    --border: 0 0% 90%;
    --input: 0 0% 80%;
    --input-background: 0 0% 100%;
    --ring: 0 0% 40%;
    --radius: 0.75rem;

    --primary: var(--brand-h) var(--brand-s) var(--brand-l);
    --primary-foreground: 0 0% 98%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;

    --sidebar-background: var(--brand-h) 0% 100%;
    --sidebar-foreground: 0 0% 5%;
    --sidebar-accent:  0 0% 98%;
    --sidebar-accent-foreground: var(--primary);
    --sidebar-primary: var(--primary);
    --sidebar-border: var(--border);

    --table-background: 0 0% 100%;
    --table-head-background: 0 0% 100%;
    --table-head-foreground: 0 0% 9%;
    --table-accent-background: 0 0% 97%;

    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
  }

  .preset-admin.dark {
    /* Brand color variables - base hue, saturation, lightness */
    --brand-h: 0;
    --brand-s: 0;
    --brand-l: 98;

    --background: 0 0% 7%;
    --foreground: 0 0% 95%;

    --card: 0 0% 10%;
    --card-foreground: 0 0% 95%;

    --popover: 0 0% 5%;
    --popover-foreground: 0 0% 95%;

    --muted: 0 0% 18%;
    --muted-foreground: 0 0% 63.9%;

    --accent: 0 0% 16%;
    --accent-foreground: 0 0% 95%;

    --border: 0 0% 14%;
    --input: 0 0% 22%;
    --input-background: 0 0% 10%;
    --ring: 0 0% 60.1%;

    --primary: var(--brand-h) var(--brand-s) var(--brand-l);
    --primary-foreground: 0 0% 9%;

    --accent: 0 0% 16%;
    --accent-foreground: 0 0% 95%;

    --destructive: 0 100% 60%;
    --destructive-foreground: 0 0% 96%;

    --sidebar-background: 0 0% 10%;
    --sidebar-foreground: 0 0% 96%;
    --sidebar-accent: 0 0% 6%;
    --sidebar-accent-foreground: var(--primary);
    --sidebar-primary: var(--primary);
    --sidebar-border: var(--border);

    --table-background: 0 0% 8%;
    --table-head-background: 0 0% 8%;
    --table-head-foreground: 0 0% 95%;
    --table-accent-background: 0 0% 11%;

    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
  }

  /* Landing Page Preset - Bright, vibrant, welcoming */
  .preset-landing-page {
    --background: 0 0% 100%;
    --foreground: 0 0% 3.9%;

    --card: 0 0% 100%;
    --card-foreground: 0 0% 3.9%;

    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 3.9%;

    --muted: 0 0% 96.1%;
    --muted-foreground: 0 0% 45.1%;

    --accent: 0 0% 96.1%;
    --accent-foreground: 0 0% 9%;

    --border: 0 0% 89.8%;
    --input: 0 0% 89.8%;
    --input-background: 0 0% 100%;
    --ring: 0 0% 3.9%;
    --radius: 0.75rem;

    --primary: 208 80% 50%;
    --primary-foreground: 0 0% 98%;

    --secondary: 0 0% 96.1%;
    --secondary-foreground: 0 0% 9%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;

    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
  }

  .preset-landing-page.dark {
    --background: 0 0% 3.9%;
    --foreground: 0 0% 98%;

    --card: 0 0% 3.9%;
    --card-foreground: 0 0% 98%;

    --popover: 0 0% 3.9%;
    --popover-foreground: 0 0% 98%;

    --muted: 0 0% 14.9%;
    --muted-foreground: 0 0% 63.9%;

    --accent: 0 0% 14.9%;
    --accent-foreground: 0 0% 98%;

    --border: 0 0% 14.9%;
    --input: 0 0% 14.9%;
    --input-background: 0 0% 3.9%;
    --ring: 0 0% 83.1%;
    

    --secondary: 0 0% 14.9%;
    --secondary-foreground: 0 0% 98%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;

    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;

    /* Custom tokens for funnel pages - dark mode */
    --text-primary: 220 10% 95%;
    --text-secondary: 220 10% 75%;
    --text-muted: 220 10% 60%;
    
    --surface-elevated: 220 18% 12%;
    --surface-subtle: 220 15% 15%;
    
    --cta-bg: var(--primary);
    --cta-hover: 220 15% 95%;
    --cta-text: 220 20% 10%;
    
    --success: 160 60% 50%;
    --success-muted: 160 40% 20%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  html {
    width: 100%;
    overflow-x: hidden;
  }
  body {
    @apply bg-background text-foreground;
    width: 100%;
    overflow-x: hidden;
    position: relative;
    isolation: isolate; /* allow pseudo-elements to layer above background */
    z-index: 0;
  }

  /* Public/landing page font families - only apply when NOT in admin */
  /* Check html element since preset-admin class is on html, not body */
  html:not(.preset-admin) body,
  html:not(.preset-admin) body * {
    font-family: var(--font-family-public-body), system-ui, sans-serif !important;
  }
  
  html:not(.preset-admin) body h1,
  html:not(.preset-admin) body h2,
  html:not(.preset-admin) body h3,
  html:not(.preset-admin) body h4,
  html:not(.preset-admin) body h5,
  html:not(.preset-admin) body h6 {
    font-family: var(--font-family-public-heading), system-ui, sans-serif !important;
  }
}

@layer components {
  .section-container {
    @apply max-w-4xl mx-auto px-6 md:px-8;
  }

  .section-spacing {
    @apply py-4 md:py-16 px-3 md:px-0;
  }

  /* Hero text alignment - easily change alignment for entire hero section */
  /* Change 'center' below to 'left', 'right', or 'justify' as needed */
  /* All child elements will automatically inherit this alignment */
  .hero-align {
    text-align: left;
  }

  /* Hero text alignment - easily change alignment for entire hero section */
  /* Change 'center' below to 'left', 'right', or 'justify' as needed */
  /* All child elements will automatically inherit this alignment */
  .hero-align-bullet {
    justify-content: left;
  }

  .heading-xl {
    @apply text-3xl md:text-4xl lg:text-5xl font-semibold tracking-tight leading-tight;
    color: hsl(var(--text-primary));
  }

  .heading-lg {
    @apply text-2xl md:text-3xl font-semibold tracking-tight;
    color: hsl(var(--text-primary));
  }

  .heading-md {
    @apply text-xl md:text-2xl font-semibold tracking-tight;
    color: hsl(var(--text-primary));
  }

  .heading-sm {
    @apply text-lg font-semibold;
    color: hsl(var(--text-primary));
  }

  .body-lg {
    @apply text-lg md:text-xl leading-relaxed;
    color: hsl(var(--text-secondary));
  }

  .body-md {
    @apply text-base md:text-lg leading-relaxed;
    color: hsl(var(--text-secondary));
  }

  .body-sm {
    @apply text-sm leading-relaxed;
    color: hsl(var(--text-muted));
  }

  .cta-primary {
    @apply inline-flex items-center justify-center px-8 py-4 text-base font-medium rounded-lg transition-all duration-200;
    background-color: hsl(var(--cta-bg));
    color: hsl(var(--cta-text));
  }

  .cta-primary:hover {
    background-color: hsl(var(--cta-hover));
    transform: translateY(-1px);
  }

  .divider {
    @apply w-full h-px;
    background-color: hsl(var(--border));
  }
}

/* Admin-specific font families - MUST be outside @layer to override Tailwind utilities */
/* Use universal selector to ensure fonts apply to ALL elements including buttons, divs, spans, etc. */
/* Always use geist-sans for admin (no dynamic font switching) */

/* Ensure CSS variable is set IMMEDIATELY - this prevents Times font flash on analytics page */
/* Set it on :root first so it's available before Next.js sets it */
:root {
  --font-geist-sans: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
}

/* Also set on html.preset-admin to ensure it's always available */
html.preset-admin {
  --font-geist-sans: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
}

html.preset-admin *,
html.preset-admin *::before,
html.preset-admin *::after {
  font-family: var(--font-geist-sans) !important;
}

html.preset-admin h1,
html.preset-admin h2,
html.preset-admin h3,
html.preset-admin h4,
html.preset-admin h5,
html.preset-admin h6,
html.preset-admin h1 *,
html.preset-admin h2 *,
html.preset-admin h3 *,
html.preset-admin h4 *,
html.preset-admin h5 *,
html.preset-admin h6 * {
  font-family: var(--font-geist-sans) !important;
}


/* Sparkle animation for decorative elements */
@keyframes sparkle {
  0%, 100% {
    opacity: 0;
    transform: scale(0);
  }
  50% {
    opacity: 1;
    transform: scale(1);
  }
}

.sparkle {
  position: absolute;
  width: 4px;
  height: 4px;
  background: hsl(var(--primary));
  border-radius: 50%;
  animation: sparkle 3s ease-in-out infinite;
  opacity: 0.3;
}

/* Fade in animation */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-in {
  animation: fadeIn 0.2s ease-in-out;
}

/* Admin navigation animations */
@keyframes menuItemClick {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(0.96);
  }
  100% {
    transform: scale(1);
  }
}

/* Loading overlay fade in */
@keyframes overlayFadeIn {
  from {
    opacity: 0;
    backdrop-filter: blur(0px);
  }
  to {
    opacity: 1;
    backdrop-filter: blur(4px);
  }
}

/* Responsive table row - hidden on mobile, visible on desktop */
.table-row-responsive {
  display: none;
}

@media (min-width: 768px) {
  .table-row-responsive {
    display: table-row;
  }
}

/* Table row hover effect using CSS variable */
table tbody tr:hover {
  background-color: hsl(var(--table-accent-background)) !important;
}

/* Landing page utilities */
.bg-dot-pattern {
  background-image: radial-gradient(circle, hsl(220 18% 20%) 1px, transparent 1px);
  background-size: 24px 24px;
}

.dark .bg-dot-pattern {
  background-image: radial-gradient(circle, hsl(220 18% 30%) 1px, transparent 1px);
}

.bg-gradient-radial {
  background: radial-gradient(ellipse at 50% 0%, hsl(var(--primary) / 0.08), transparent 60%);
}

.text-gradient {
  background: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--primary) / 0.8));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.bg-gradient-blue {
  background: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--primary) / 0.8));
}

.border-glow {
  border: 1px solid hsl(var(--border));
  box-shadow: 0 0 20px hsl(var(--primary) / 0.1);
}

.glow-blue {
  box-shadow: 0 0 60px hsl(var(--primary) / 0.3);
}

/* Glow animations using primary color */
@keyframes glow-pulse {
  0%, 100% {
    box-shadow: 0 0 20px hsl(var(--primary) / 0.3);
  }
  50% {
    box-shadow: 0 0 40px hsl(var(--primary) / 0.5);
  }
}

@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(200%);
  }
}

@keyframes glow-pulse-small {
  0%, 100% {
    box-shadow: 0 0 15px hsl(var(--primary) / 0.2);
  }
  50% {
    box-shadow: 0 0 30px hsl(var(--primary) / 0.4);
  }
}

.glow-pulse {
  animation: glow-pulse 2s ease-in-out infinite;
}

.glow-pulse-small {
  animation: glow-pulse-small 2s ease-in-out infinite;
}

/* Disable browser autofill styling */
input:-webkit-autofill,
input:-webkit-autofill:hover,
input:-webkit-autofill:focus,
input:-webkit-autofill:active {
  -webkit-box-shadow: 0 0 0 30px transparent inset !important;
  -webkit-text-fill-color: hsl(var(--foreground)) !important;
  box-shadow: 0 0 0 30px transparent inset !important;
  transition: background-color 5000s ease-in-out 0s;
}

input[type="password"]:-webkit-autofill,
input[type="password"]:-webkit-autofill:hover,
input[type="password"]:-webkit-autofill:focus,
input[type="password"]:-webkit-autofill:active {
  -webkit-box-shadow: 0 0 0 30px transparent inset !important;
  -webkit-text-fill-color: hsl(var(--foreground)) !important;
  box-shadow: 0 0 0 30px transparent inset !important;
  transition: background-color 5000s ease-in-out 0s;
}

/* 
 * WISTIA PLAYER COLOR CUSTOMIZATION
 * ==================================
 * 
 * The Wistia player color is set via JavaScript API in Hero.tsx using the Wistia Queue (_wq).
 * The playerColor API affects BOTH the play button AND the progress bar.
 * 
 * TO CHANGE THE COLOR TO FOLLOW PRIMARY COLOR:
 * ---------------------------------------------
 * 1. Update your primary brand color in:
 *    - Admin Settings: /admin/settings → Appearance → Primary Color (EASIEST - automatically updates)
 *    - OR CSS: src/app/globals.css 
 *      * Change --brand-h, --brand-s, --brand-l variables (lines 8-10 for light, 54-56 for dark)
 *      * OR directly override --primary variable (line 32)
 * 
 * 2. The color is automatically read and applied to BOTH play button AND progress bar
 * 
 * TO USE A CUSTOM COLOR (different from primary):
 * ------------------------------------------------
 * 1. Open: src/components/landing/Hero.tsx
 * 2. Find the script around line 276-277
 * 3. Change: var useCustomColor = true;
 * 4. Set: var customColor = 'yourhexcolor'; (without # symbol)
 *    Example: var customColor = 'ff5733'; // Red
 * 
 * IMPORTANT: These CSS rules below are fallbacks but may not work due to iframe restrictions.
 * The primary method is the JavaScript API which is set up in src/components/landing/Hero.tsx
 * The API applies to BOTH play button AND progress bar automatically.
 */

/* Big Play Button Wrapper and Button */
.wistia_embed .w-bpb-wrapper,
.wistia_embed .w-big-play-button,
.wistia_embed .w-big-play-button:hover,
.wistia_embed .w-big-play-button:focus,
.wistia_embed .w-big-play-button:active {
  background-color: hsl(var(--primary) / 0.2) !important;
  background: hsl(var(--primary) / 0.2) !important;
}

/* Target the second div with opacity: rgba(109, 237, 212, 0.7) */
.wistia_embed .w-big-play-button > div[style*="rgba(109, 237, 212, 0.7)"],
.wistia_embed .w-big-play-button > div[style*="rgba(109, 237, 212, 0.85)"] {
  background-color: hsl(var(--primary) / 0.85) !important;
  background: hsl(var(--primary) / 0.85) !important;
}

/* Big Play Button - Icon/foreground should always be white */
.wistia_embed .w-big-play-button svg,
.wistia_embed .w-big-play-button svg *,
.wistia_embed .w-big-play-button svg path {
  fill: #ffffff !important;
  color: #ffffff !important;
}

/* Progress Bar - Background only (primary with transparency) */
/* Target the progress bar inner element */
.wistia_embed .w-progress-bar .w-progress-inner,
.wistia_embed .w-controls .w-bar .w-progress-bar .w-progress-inner {
  background-color: hsl(var(--primary) / 0.85) !important;
  background: hsl(var(--primary) / 0.85) !important;
}

/* Target progress bar divs with inline styles - ONLY inside progress bar containers */
/* This targets progress bar elements like: 
   <div style="background: rgba(134, 228, 27, 0.85); border-radius: 4.5px;..."> */
.wistia_embed [style*="rgba(109, 237, 212, 0.85)"],
.wistia_embed [style*="background: rgba(109, 237, 212, 0.85)"],
.wistia_embed div[style*="rgba(109, 237, 212, 0.85)"],
.wistia_embed .w-progress-bar div[style*="rgba(109, 237, 212, 0.85)"],
.wistia_embed .w-progress-inner div[style*="rgba(109, 237, 212, 0.85)"],
.wistia_embed .w-progress-bar div[style*="rgba(134, 228, 27, 0.85)"],
.wistia_embed .w-progress-inner div[style*="rgba(134, 228, 27, 0.85)"],
/* Target ONLY the progress bar fill element - must have background rgba AND be inside progress bar */
/* This targets: <div style="background: rgba(134, 228, 27, 0.85); border-radius: 4.5px; height: 100%;..."> */
/* EXCLUDE: w-vulcan-v2 and w-vulcan--background elements (video container) */
.wistia_embed .w-progress-bar div[style*="border-radius: 4.5px"][style*="background: rgba"],
.wistia_embed .w-progress-bar div[style*="border-radius: 4.5px"][style*="background:rgb"],
.wistia_embed .w-progress-inner div[style*="border-radius: 4.5px"][style*="background"],
/* More specific: progress bar fill with rgba background */
.wistia_embed .w-progress-bar > div[style*="rgba("][style*="border-radius: 4.5px"] {
  background: hsl(var(--primary) / 0.85) !important;
  background-color: hsl(var(--primary) / 0.85) !important;
  border-radius: 0 !important;
}

/* Remove border-radius ONLY from progress bar fill elements */
/* Target: progress bar fill element inside .w-progress-bar or .w-progress-inner */
/* This element: <div style="background: rgba(...); border-radius: 4.5px; height: 100%; position: absolute;..."> */
/* IMPORTANT: Only target divs inside progress bar containers, NOT play button or w-vulcan */
.wistia_embed .w-progress-bar div[style*="border-radius: 4.5px"],
.wistia_embed .w-progress-inner div[style*="border-radius: 4.5px"],
.wistia_embed .w-progress-bar > div[style*="border-radius: 4.5px"] {
  border-radius: 0 !important;
}

/* EXCLUDE w-vulcan elements from any primary color styling - CRITICAL */
/* These are video container elements, they should NEVER get primary color background */
.wistia_embed .w-vulcan-v2,
.wistia_embed .w-vulcan--background,
.wistia_embed [class*="w-vulcan"],
.wistia_embed [id*="w-vulcan"] {
  background: transparent !important;
  background-color: transparent !important;
  /* Reset any accidental primary color */
  background-image: none !important;
}

/* EXCLUDE: play button - DO NOT change its border-radius */
/* The play button is NOT inside .w-progress-bar, so it won't be affected by the rule above */
/* But we explicitly exclude it to be safe */
.wistia_embed .w-big-play-button,
.wistia_embed .w-big-play-button *,
.wistia_embed button[class*="w-big-play-button"],
.wistia_embed button[class*="w-big-play-button"] * {
  /* Keep original border-radius - do not override */
  /* These elements are not inside .w-progress-bar so they won't be affected */
}

/* Ensure w-vulcan elements are not matched by any progress bar selectors */
.wistia_embed .w-vulcan-v2[style*="border-radius: 4.5px"],
.wistia_embed .w-vulcan--background[style*="border-radius: 4.5px"],
.wistia_embed [class*="w-vulcan"][style*="border-radius: 4.5px"] {
  background: transparent !important;
  background-color: transparent !important;
  /* Keep original border-radius - do not override */
}

/* Bottom Bar - Remove border radius */
/* This targets: <div class="w-bottom-bar" style="...border-radius: 4.5px;..."> */
.wistia_embed .w-bottom-bar,
.wistia_embed [class*="w-bottom-bar"],
.wistia_embed div.w-bottom-bar[style*="border-radius: 4.5px"],
.wistia_embed div[style*="border-radius: 4.5px"][style*="bottom: 0px"] {
  border-radius: 0 !important;
}

/* Progress Bar Track - Keep as is or make subtle */
.wistia_embed .w-progress-bar,
.wistia_embed .w-controls .w-bar .w-progress-bar {
  background-color: rgba(255, 255, 255, 0.2) !important;
}

/* Control Buttons - Icons should be foreground color */
.wistia_embed .w-controls .w-play-button,
.wistia_embed .w-controls .w-play-button:hover,
.wistia_embed .w-controls .w-play-button:focus,
.wistia_embed .w-controls .w-pause-button,
.wistia_embed .w-controls .w-pause-button:hover,
.wistia_embed .w-controls .w-pause-button:focus,
.wistia_embed .w-controls .w-volume-button,
.wistia_embed .w-controls .w-volume-button:hover,
.wistia_embed .w-controls .w-volume-button:focus,
.wistia_embed .w-controls .w-fullscreen-button,
.wistia_embed .w-controls .w-fullscreen-button:hover,
.wistia_embed .w-controls .w-fullscreen-button:focus {
  color: hsl(var(--foreground)) !important;
  fill: hsl(var(--foreground)) !important;
  stroke: hsl(var(--foreground)) !important;
}

/* All SVG elements - Foreground color */
.wistia_embed .w-controls svg,
.wistia_embed .w-controls svg * {
  fill: hsl(var(--foreground)) !important;
  color: hsl(var(--foreground)) !important;
  stroke: hsl(var(--foreground)) !important;
}

/* Time display and other text elements - Foreground color */
.wistia_embed .w-current-time,
.wistia_embed .w-duration,
.wistia_embed .w-time-display {
  color: hsl(var(--foreground)) !important;
}

/* Control bar background - Keep dark */
.wistia_embed .w-controls,
.wistia_embed .w-controls .w-bar {
  background-color: rgba(0, 0, 0, 0.8) !important;
}

/* Masonry Grid */
.masonry-grid {
  display: flex;
  margin-left: -2.5rem;
  width: auto;
}

.masonry-grid_column {
  padding-left: 2.5rem;
  background-clip: padding-box;
}

.masonry-grid_column > div {
  margin-bottom: 2.5rem;
  position: relative;
}

/* Create overlapping rows with same-height items using transforms */
.masonry-grid_column:nth-child(1) > div:nth-child(odd) {
  transform: translateY(-2.5rem);
  z-index: 1;
}

.masonry-grid_column:nth-child(1) > div:nth-child(even) {
  transform: translateY(2.5rem);
  z-index: 2;
}

.masonry-grid_column:nth-child(2) > div:nth-child(odd) {
  transform: translateY(2.5rem);
  z-index: 2;
}

.masonry-grid_column:nth-child(2) > div:nth-child(even) {
  transform: translateY(-2.5rem);
  z-index: 1;
}

/* Rich Text Styling - Inherit font-weight and make bold heavier */
.rich-text-content {
  font-weight: inherit;
}

/* Color markers inherit weight from parent */
.rich-text-content span.text-primary,
.rich-text-content span.text-secondary {
  font-weight: inherit;
}

/* Bold markers make text heavier than parent */
.rich-text-content strong {
  font-weight: 900;
}

/* Code Editor Fixes - Fix cursor alignment and font rendering */
.w-tc-editor textarea,
.w-tc-editor pre {
  font-family: ui-monospace, SFMono-Regular, 'SF Mono', 'Courier New', Courier, 'Liberation Mono', Menlo, Consolas, 'DejaVu Sans Mono', monospace !important;
  font-feature-settings: normal !important;
  font-variant-ligatures: none !important;
  letter-spacing: 0 !important;
  line-height: 1.5 !important;
  tab-size: 2 !important;
  -moz-tab-size: 2 !important;
}

.w-tc-editor textarea {
  caret-color: hsl(var(--foreground));
}

/* Ensure textarea and pre have matching font metrics for cursor alignment */
.w-tc-editor pre code {
  font-family: ui-monospace, SFMono-Regular, 'SF Mono', 'Courier New', Courier, 'Liberation Mono', Menlo, Consolas, 'DejaVu Sans Mono', monospace !important;
  letter-spacing: 0 !important;
}

/* Sidebar scrollbar - only show when scrolling, not on hover */
.sidebar-scroll-area [data-radix-scroll-area-scrollbar] {
  opacity: 0 !important;
  pointer-events: none;
  transition: opacity 300ms ease !important;
}

.sidebar-scroll-area:hover [data-radix-scroll-area-scrollbar] {
  opacity: 0 !important;
  pointer-events: none;
}

.sidebar-scroll-area:hover [data-radix-scroll-area-scrollbar][data-state="visible"] {
  opacity: 0 !important;
  pointer-events: none;
}

.sidebar-scroll-area [data-radix-scroll-area-scrollbar][data-state="visible"] {
  opacity: 0 !important;
}

/* Only show scrollbar when scrolling class is active */
.sidebar-scroll-area.scrolling [data-radix-scroll-area-scrollbar] {
  opacity: 1 !important;
  pointer-events: auto;
}

.sidebar-scroll-area.scrolling [data-radix-scroll-area-scrollbar][data-state="visible"] {
  opacity: 1 !important;
  pointer-events: auto;
}

/* Global scrollbar styling - make all scrollbars thinner */
/* Webkit browsers (Chrome, Safari, Edge) */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background-color: hsl(var(--border));
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background-color: hsl(var(--muted-foreground) / 0.5);
}

/* Firefox */
* {
  scrollbar-width: thin;
  scrollbar-color: hsl(var(--border)) transparent;
}

/* Custom shadow utilities */
@layer utilities {
  .shadow-buttons {
    box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 3px -1px, rgba(0, 0, 0, 0.07) 0px 2px 3px 0px, rgba(0, 0, 0, 0.06) 0px 1px 5px 0px;
  }

  .shadow-card {
    box-shadow: rgba(0, 0, 0, 0.1) 0px 2px 4px -1px, rgba(0, 0, 0, 0.07) 0px 4px 5px 0px, rgba(0, 0, 0, 0.06) 0px 1px 10px 0px;
  }

  .shadow-card-light {
    box-shadow: rgba(0, 0, 0, 0.05) 0px 1px 2px -1px, rgba(0, 0, 0, 0.04) 0px 2px 3px 0px, rgba(0, 0, 0, 0.06) 0px 1px 10px 0px;
  }

  .shadow-icon {
    box-shadow: rgba(0, 0, 0, 0.02) 0px 1px 2px -1px, rgba(0, 0, 0, 0.01) 0px 2px 3px 0px, rgba(0, 0, 0, 0.04) 0px 1px 10px 0px;
  }

  .shadow-menu {
    box-shadow: rgba(0, 0, 0, 0.2) 0px 2px 4px -1px, rgba(0, 0, 0, 0.14) 0px 4px 5px 0px, rgba(0, 0, 0, 0.12) 0px 1px 10px 0px;
  }

  html.preset-admin .font-mono-code,
  html.preset-admin .font-mono-code * {
    font-family: ui-monospace, SFMono-Regular, 'SF Mono', 'Courier New', Courier, 'Liberation Mono', Menlo, Consolas, 'DejaVu Sans Mono', monospace !important;
  }

  /* RAG Drawer z-index override - must appear above modals (z-[100]) */
  [data-radix-dialog-content].rag-drawer-content[data-state="open"] {
    z-index: 110 !important;
  }
  
  /* Target the overlay that's a sibling of the drawer content in the same portal */
  [data-radix-portal]:has([data-radix-dialog-content].rag-drawer-content) [data-radix-dialog-overlay] {
    z-index: 110 !important;
  }

  /* Report page utilities */
  .report-shadow {
    box-shadow: 0 4px 6px -1px rgba(15, 23, 42, 0.05), 
                0 2px 4px -2px rgba(15, 23, 42, 0.05);
  }

  .report-shadow-lg {
    box-shadow: 0 10px 15px -3px rgba(15, 23, 42, 0.08), 
                0 4px 6px -4px rgba(15, 23, 42, 0.05);
  }

  .section-divider {
    @apply relative;
  }

  .section-divider::after {
    content: '';
    @apply absolute bottom-0 left-0 w-16 h-0.5 bg-accent;
  }

  /* Standalone Report Page - Original Design System */
  /* Override body font when standalone-report is present - must be very specific */
  body:has(.standalone-report),
  body:has(.standalone-report) * {
    font-family: "Source Sans 3", system-ui, sans-serif !important;
  }

  .standalone-report {
    /* Override brand color to match primary (navy) - prevents blue #2263aa from showing */
    /* Must override BEFORE primary since primary uses brand variables */
    --brand-h: 222 !important;
    --brand-s: 47 !important;
    --brand-l: 11 !important;

    /* Override with original report colors - exact match from example */
    --background: 210 20% 98%;
    --foreground: 222 47% 11%;

    --card: 0 0% 100%;
    --card-foreground: 222 47% 11%;

    --popover: 0 0% 100%;
    --popover-foreground: 222 47% 11%;

    /* Navy Primary - #0f1729 - override computed value directly */
    --primary: 222 47% 11% !important;
    --primary-foreground: 210 40% 98% !important;

    /* Warm Gold Accent */
    --accent: 43 65% 47%;
    --accent-foreground: 222 47% 11%;

    /* Subtle Secondary */
    --secondary: 220 14% 96%;
    --secondary-foreground: 222 47% 11%;

    /* Muted for subtle backgrounds */
    --muted: 220 14% 96%;
    --muted-foreground: 220 9% 46%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    --border: 220 13% 91%;
    --input: 220 13% 91%;
    --ring: 43 65% 47%;

    /* Smaller border radius for standalone report */
    --radius: 0.25rem; /* 4px - smaller than example's 0.375rem */

    /* Custom Report Variables - exact from example */
    --navy-deep: 222 47% 8%;
    --navy: 222 47% 11%;
    --navy-light: 222 30% 20%;
    --gold: 43 65% 47%;
    --gold-light: 43 50% 65%;
    --gold-dark: 43 70% 35%;
    --cream: 40 33% 97%;
    --slate: 220 9% 46%;

    /* Sidebar */
    --sidebar-background: 222 47% 11%;
    --sidebar-foreground: 210 40% 98%;
    --sidebar-primary: 43 65% 47%;
    --sidebar-primary-foreground: 222 47% 11%;
    --sidebar-accent: 222 30% 18%;
    --sidebar-accent-foreground: 210 40% 98%;
    --sidebar-border: 222 30% 18%;
    --sidebar-ring: 43 65% 47%;

    /* Original report fonts - override landing page fonts */
    --font-display: "Playfair Display", Georgia, serif !important;
    --font-body: "Source Sans 3", system-ui, sans-serif !important;

    /* Apply body font to the entire container - use double quotes to match Google Fonts */
    font-family: "Source Sans 3", system-ui, sans-serif !important;
  }

  /* Override Tailwind rounded utilities for smaller radius */
  .standalone-report .rounded-sm {
    border-radius: 0.125rem !important; /* 2px */
  }

  .standalone-report .rounded {
    border-radius: 0.1rem !important; /* 4px */
  }

  .standalone-report .rounded-md {
    border-radius: 0.25rem !important; /* 6px */
  }

  .standalone-report .rounded-lg {
    border-radius: 0.375rem !important; /* 8px */
  }

  .standalone-report .rounded-xl {
    border-radius: 0.625rem !important; /* 10px */
  }

  .standalone-report .rounded-2xl {
    border-radius: 0.75rem !important; /* 12px */
  }

  .standalone-report .rounded-3xl {
    border-radius: 0.875rem !important; /* 14px */
  }

  /* Keep rounded-full as is for circles */
  .standalone-report .rounded-full {
    border-radius: 9999px !important;
  }

  /* Force primary color overrides - directly override any blue #2263aa with navy #0f1729 */
  /* Use simple class selectors only to avoid Tailwind processing issues */
  .standalone-report .bg-primary {
    background-color: hsl(222 47% 11%) !important;
    background: hsl(222 47% 11%) !important;
  }

  /* Override primary text color - single selector to avoid Tailwind processing issues */
  .standalone-report .text-primary {
    color: hsl(222 47% 11%) !important;
  }

  .standalone-report .text-primary-foreground {
    color: hsl(210 40% 98%) !important;
  }

  .standalone-report .border-primary {
    border-color: hsl(222 47% 11%) !important;
  }

  /* Apply display font to all headings */
  .standalone-report h1,
  .standalone-report h2,
  .standalone-report h3,
  .standalone-report h4,
  .standalone-report h5,
  .standalone-report h6,
  .standalone-report .font-display {
    font-family: 'Playfair Display', Georgia, serif !important;
  }

  /* Apply body font to all text elements - override landing page fonts and Tailwind utilities */
  /* Override Tailwind font utilities - use double quotes to match Google Fonts exactly */
  .standalone-report .font-sans,
  .standalone-report [class*="font-"]:not(.font-display) {
    font-family: ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji" !important;
  }

  /* Use universal selector to catch everything, then override specific elements */
  .standalone-report *:not(h1):not(h2):not(h3):not(h4):not(h5):not(h6):not(.font-display) {
    font-family: ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji" !important;
  }

  /* Specific overrides for common elements - use double quotes */
  .standalone-report p,
  .standalone-report span,
  .standalone-report div,
  .standalone-report li,
  .standalone-report td,
  .standalone-report th,
  .standalone-report button,
  .standalone-report a,
  .standalone-report label,
  .standalone-report input,
  .standalone-report textarea,
  .standalone-report select,
  .standalone-report .font-body,
  .standalone-report main,
  .standalone-report aside,
  .standalone-report section,
  .standalone-report article,
  .standalone-report header,
  .standalone-report footer,
  .standalone-report small,
  .standalone-report strong,
  .standalone-report em,
  .standalone-report b,
  .standalone-report i,
  .standalone-report u {
    font-family: ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji" !important;
  }

  .standalone-report.dark {
    --background: 222 47% 6%;
    --foreground: 210 40% 96%;
    --card: 222 47% 8%;
    --card-foreground: 210 40% 96%;
    --primary: 210 40% 96%;
    --primary-foreground: 222 47% 11%;
    --accent: 43 65% 47%;
    --secondary: 222 30% 15%;
    --secondary-foreground: 210 40% 96%;
    --muted: 222 30% 15%;
    --muted-foreground: 220 9% 60%;
    --border: 222 30% 18%;
    --sidebar-background: 222 47% 6%;
    --sidebar-foreground: 210 40% 96%;
    --sidebar-accent: 222 30% 12%;
  }

  /* Chat specific tokens */
  :root {
    --chat-user-bg: 217 91% 60%;
    --chat-user-fg: 0 0% 100%;
    --chat-ai-bg: 210 40% 96%;
    --chat-ai-fg: 222 47% 11%;
    --chat-shadow: 0 4px 24px -4px hsl(222 47% 11% / 0.1);
    --chat-shadow-lg: 0 8px 32px -8px hsl(222 47% 11% / 0.15);
  }

  .dark {
    --chat-user-bg: 217 91% 55%;
    --chat-user-fg: 0 0% 100%;
    --chat-ai-bg: 217 33% 17%;
    --chat-ai-fg: 210 40% 98%;
  }

  /* Chat utilities */
  .chat-shadow {
    box-shadow: var(--chat-shadow);
  }

  .chat-shadow-lg {
    box-shadow: var(--chat-shadow-lg);
  }

  /* Position chat history popover on the right side of chat sidebar */
  /* Chat sidebar is 500px wide, popover is 320px (w-80), position from right edge of sidebar */
  [data-radix-popover-content].chat-history-popover {
    left: auto !important;
    right: 1rem !important;
    transform: translateX(0) !important;
  }
  
  /* On mobile, the chat is full screen, so position from right edge */
  @media (max-width: 767px) {
    [data-radix-popover-content].chat-history-popover {
      right: 1rem !important;
    }
  }

  .text-vertical {
    writing-mode: vertical-rl;
    text-orientation: mixed;
  }

  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: hsl(var(--border)) transparent;
  }

  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background: hsl(var(--border));
    border-radius: 3px;
  }

  @keyframes typing-dot {
    0%, 60%, 100% {
      opacity: 0.3;
      transform: scale(0.8);
    }
    30% {
      opacity: 1;
      transform: scale(1);
    }
  }

  .animate-typing-dot {
    animation: typing-dot 1.4s ease-in-out infinite;
  }

  /* Wave animations for landing page */
  @keyframes wave {
    0%, 100% {
      transform: translateX(0);
    }
    50% {
      transform: translateX(-25px);
    }
  }

  @keyframes wave-reverse {
    0%, 100% {
      transform: translateX(0);
    }
    50% {
      transform: translateX(25px);
    }
  }

  .animate-wave {
    animation: wave 20s ease-in-out infinite;
  }

  .animate-wave-reverse {
    animation: wave-reverse 25s ease-in-out infinite;
  }

  /* Make bullet points (dots) bigger in chat messages */
  .markdown-content ul li::marker {
    font-size: 18px;
  }

  /* Keep numbered list markers at 15px to match text */
  .markdown-content ol li::marker {
    font-size: 15px;
  }

  /* Print styles */
  @media print {
    .no-print {
      display: none !important;
    }

    .print-break {
      page-break-before: always;
    }

    body {
      font-size: 11pt;
    }

    .sidebar {
      display: none;
    }
  }

  /* Prevent sticky hover states on touch devices */
  /* Only apply hover styles on devices that actually support hover */
  @media (hover: none) {
    button:hover,
    button:focus-visible:hover {
      background-color: inherit !important;
    }
  }

  /* Touch-friendly button - prevents sticky hover */
  .touch-safe-button {
    touch-action: manipulation;
  }

  @media (hover: none) {
    .touch-safe-button:hover {
      background-color: inherit !important;
      color: inherit !important;
    }
  }
}
